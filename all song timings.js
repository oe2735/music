class songChatoe2735 {
    constructor (sendChat) {
        this.sendChat = sendChat;
        this.songs = [
            {audio: new Audio("https://github.com/oe2735/music/raw/refs/heads/main/Avicii_-_The_Nights_(Hydr0.org).mp3"), lyrics: [
[3300, `Once upon a younger year`],
[4895, `When all our shadows`],
[5960, `disappeared`],
[6805, `The animals inside`],
[8017, `came out to play`],
[10754, `Went face to face`],
[11482, `with all our fears`],
[12731, `Learned our lessons`],
[13646, `through the tears`],
[14428, `Made memories we knew`],
[15761, `would never fade`],
[17794, `One day, my father,`],
[19150, `he told me,`],
[19864, `Son, don't let it slip away`],
[22065, `He took me in his arms,`],
[23325, `I heard him say`],
[25869, `When you get older,`],
[26778, `your wild heart will`],
[28002, `live for younger days`],
[29788, `Think of me if`],
[30689, `ever you're afraid`],
[32988, `He said,`],
[33654, `One day,`],
[34508, `you'll leave this world behind`],
[36777, `So live a life`],
[38205, `you will remember`],
[40695, `My father told me when`],
[42318, `I was just a child`],
[44429, `These are the nights`],
[45729, `that never die`],
[47686, `My father told me`],
[79400, `When thunderclouds`],
[80349, `start pouring down`],
[81219, `Light a fire`],
[81992, `they can't put out`],
[83286, `Carve your name`],
[83917, `into those shining stars`],
[86457, `He said,`],
[87010, `Go venture far`],
[87841, `beyond the shores`],
[88876, `Don't forsake this`],
[89746, `life of yours`],
[90527, `I'll guide you home`],
[91493, `no matter where you are`],
[93932, `One day, my father,`],
[95309, `he told me,`],
[96018, `Son, don't let it slip away`],
[98247, `When I was just a kid,`],
[99549, `I heard him say`],
[101853, `When you get older,`],
[103150, `your wild heart`],
[104064, `will live for younger days`],
[106088, `Think of me if`],
[106947, `ever you're afraid`],
[109229, `He said,`],
[109656, `One day,`],
[110614, `you'll leave this world behind`],
[113017, `So live a life`],
[114356, `you will remember`],
[116823, `My father told me when`],
[118283, `I was just a child`],
[120576, `These are the nights`],
[121980, `that never die`],
[124003, `My father told me`],
[136169, `These are the nights`],
[137292, `that never die`],
[139361, `My father told me`],
[163736, `Oh~`],
[169915, `My father told me`],
            ], index: 0},
            {audio: new Audio("https://github.com/oe2735/music/raw/refs/heads/main/Eurobeat_-_Manuel_-_Gas_Gas_Gas_(Hydr0.org).mp3"), lyrics: [
[17000, `Ahhhhh`],
[19954, `gas,`],
[20720, `Gas,`],
[21509, `gas`],
[24000, `Ahhhhh`],
[28432, `Do you like`],
[29789, `My car?`],
[31489, `my car`],
[33067, `m y  c a r`],
[53120, `Guess you're ready`],
[54234, `Cause I'm waiting for you`],
[55956, `It's gonna be so exciting!`],
[59140, `Got this feeling`],
[60397, `Really deep in my soul`],
[62309, `Let's get out, I wanna go`],
[63983, `Come along, get it on!`],
[65956, `Gonna take my car`],
[67536, `Gonna sit in`],
[69106, `Gona drive along til I get you`],
[71770, `Cause I'm crazy, hot and ready`],
[73609, `But you'll like it!`],
[74894, `I wanna race for you!`],
[76739, `(Shall I go now?)`],
[78426, `Gas Gas Gas!`],
[79661, `I'm gonna step on the gas`],
[81378, `Tonight I'll fly!`],
[82900, `And be your lover`],
[84218, `Yeah yeah yeah!`],
[85933, `I'll be so quick as a flash`],
[87594, `And I'll be your hero`],
[90462, `Gas Gas Gas!`],
[92184, `I'm gonna run as a flash`],
[93930, `Tonight I'll fight!`],
[95561, `To be the winner`],
[96766, `Yeah yeah yeah!`],
[98475, `I'm gonna step on the gas`],
[100093, `And you'll see the big show!`],
[115553, `Don't be lazy`],
[116577, `Cause I'm burning for you`],
[118431, `It's like a hot sensation!`],
[121661, `Got this power`],
[122805, `That is taking me out`],
[124524, `Yes, I've got a crush on you`],
[126383, `Ready, now`],
[127324, `Ready, go!`],
[128283, `Gonna take my car`],
[129837, `Gonna sit in`],
[131431, `Gona drive along til I get you`],
[134033, `Cause I'm crazy, hot and ready`],
[135838, `But you'll like it!`],
[137299, `I wanna race for you!`],
[139000, `Shall I go now?`],
[140495, `Gas Gas Gas!`],
[141981, `I'm gonna step on the gas`],
[143616, `Tonight I'll fly!`],
[145350, `And be your lover`],
[146554, `Yeah yeah yeah!`],
[148246, `I'll be so quick as a flash`],
[149886, `And I'll be your hero`],
[152696, `Gas Gas Gas!`],
[154549, `I'm gonna run as a flash`],
[156175, `Tonight I'll fight!`],
[157747, `To be the winner`],
[158965, `Yeah yeah yeah!`],
[160813, `I'm gonna step on the gas`],
[162436, `And you'll see the big show!`],
[190357, `Guess you're ready`],
[191319, `Cause I'm waiting for you`],
[193338, `It's gonna be so exciting!`],
[196258, `Got this feeling`],
[197534, `Really deep in my soul`],
[199240, `Let's get out, I wanna go`],
[201109, `Come along, get it on`],
[203124, `Gonna take my car`],
[206184, `Do you like my car?`],
[208904, `Cause I'm crazy, hot and ready`],
[210626, `But you'll like it!`],
[212057, `I wanna race for you!`],
[213833, `Shall I go now?`],
[216846, `Gas Gas Gas!`],
[218433, `I'm gonna step on the gas`],
[220052, `Tonight I'll fly!`],
[221687, `And be your lover`],
[222927, `Yeah yeah yeah!`],
[224791, `I'll be so quick as a flash`],
[226348, `And I'll be your hero`],
[229497, `Gas Gas Gas!`],
[230955, `I'm gonna run as a flash`],
[232590, `Tonight I'll fight!`],
[234096, `To be the winner`],
[235462, `Yeah yeah yeah!`],
[237258, `I'm gonna step on the gas`],
[238816, `And you'll see the big show!`],
[242147, `Gas Gas Gas!`],
[244960, `Yeah yeah yeah!`],
[248228, `Gas Gas Gas!`],
[251217, `And you'll see the big show!`]
            ], index: 0},
            {audio: new Audio("https://github.com/oe2735/music/raw/refs/heads/main/Ruth_B._-_Dandelions_(Hydr0.org).mp3"), lyrics: [
/*[12374, `Maybe it's the way you`],
[13801, `say my name`],
[18449, `Maybe it's the way you`],
[19999, `play your game`],
[23409, `But it's so good,`],
[25377, `I've never known`],
[26436, `anybody like you`],
[29571, `But it's so good,`],
[31444, `I've never dreamed`],
[32502, `of nobody like you`],
[36114, `And I've heard of a love`],
[38119, `that comes once in a lifetime`],
[42777, `And I'm pretty sure that`],
[44284, `you are that love of mine`],
[48440, `'Cause`],
[49217, `I'm in a field of dandelions`],
[52292, `Wishing on every one`],
[54337, `that you'd be mine,`],
[58440, `mine`],
[60688, `And I see forever`],
[63013, `in your eyes`],
[64644, `I feel okay when I`],
[66811, `see you smile,`],
[70717, `smile`],
[72876, `Wishing on dandelions`],
[74654, `all of the time`],
[75949, `Praying to God that`],
[77376, `one day you'll be mine`],
[79295, `Wishing on dandelions`],
[80943, `all of the time,`],
[82333, `all of the time`],
[85942, `I think that you`],
[87232, `are the one for me`],
[92178, `'Cause it gets so`],
[93923, `hard to breathe`],
[97326, `When you're looking at me,`],
[99237, `I've never felt so`],
[100254, `alive and free`],
[103515, `When you're looking at me,`],
[105422, `I've never felt so happy`],
[110115, `And I've heard of a love`],
[112008, `that comes once in a lifetime`],
[116726, `And I'm pretty sure that`],
[117919, `you are that love of mine`],
[122253, `'Cause`],
[123031, `I'm in a field of dandelions`],
[126210, `Wishing on every one`],
[128174, `that you'd be mine,`],
[132244, `mine`],
[134533, `And I see forever`],
[136838, `in your eyes`],
[138435, `I feel okay when I`],
[140640, `see you smile,`],
[144584, `smile`],
[146981, `Wishing on dandelions`],
[148503, `all of the time`],
[149990, `Praying to God that`],
[151110, `one day you'll be mine`],
[153113, `Wishing on dandelions`],
[154645, `all of the time`],
[156089, `All of the time`],
[159984, `Dandelion,`],
[160856, `into the wind you go`],
[162977, `Won't you let`],
[164060, `my darling know?`],
[166255, `Dandelion,`],
[167062, `into the wind you go`],
[169026, `Won't you let`],
[170281, `my darling know?`],
[171780, `That`],
[174085, `I'm in a field of dandelions`],
[176968, `Wishing on every one that`],
[179125, `you'd be mine,`],
[182991, `mine`],
[185378, `And I see forever`],
[187621, `in your eyes`],
[189249, `I feel okay when I`],
[191424, `see you smile,`],
[195371, `smile`],
[197745, `Wishing on dandelions`],
[199289, `all of the time`],
[200734, `Praying to God that`],
[202002, `one day you'll be mine`],
[203865, `Wishing on dandelions`],
[205201, `all of the time,`],
[206978, `all of the time`],
[210708, `I'm in a field of dandelions`],
[213865, `Wishing on every one that`],
[216189, `you'd be mine,`],
[219964, `mine`],*/
                [12262, `Maybe it's the way you`],
[13658, `say my name`],
[18179, `Maybe it's the way you`],
[19909, `play your game`],
[23413, `But it's so good,`],
[25263, `I've never known`],
[26662, `anybody like you`],
[29395, `But it's so good,`],
[31377, `I've never dreamed`],
[32581, `of nobody like you`],
[36052, `And I've heard of a love`],
[38112, `that comes once in a lifetime`],
[42952, `And I'm pretty sure that`],
[44197, `you are that love of mine`],
[48426, `'Cause`],
[49149, `I'm in a field of dandelions`],
[52165, `Wishing on every one`],
[54328, `that you'd be mine,`],
[58249, `mine`],
[60742, `And I see forever`],
[62970, `in your eyes`],
[64612, `I feel okay when I`],
[66752, `see you smile,`],
[70601, `smile`],
[73029, `Wishing on dandelions`],
[74563, `all of the time`],
[76054, `Praying to God that`],
[77225, `one day you'll be mine`],
[79069, `Wishing on dandelions`],
[80697, `all of the time,`],
[82231, `all of the time`],
[85965, `I think that you`],
[87070, `are the one for me`],
[91994, `'Cause it gets so`],
[93159, `hard to breathe`],
[97220, `When you're looking at me,`],
[98988, `I've never felt so`],
[100361, `alive and free`],
[103448, `When you're looking at me,`],
[105249, `I've never felt so happy`],
[109930, `And I've heard of a love`],
[111902, `that comes once in a lifetime`],
[116665, `And I'm pretty sure that`],
[117986, `you are that love of mine`],
[122308, `'Cause`],
[123135, `I'm in a field of dandelions`],
[126030, `Wishing on every one`],
[128050, `that you'd be mine,`],
[131823, `mine`],
[134401, `And I see forever`],
[136962, `in your eyes`],
[138340, `I feel okay when I`],
[140597, `see you smile,`],
[144301, `smile`],
[147113, `Wishing on dandelions`],
[148588, `all of the time`],
[149911, `Praying to God that`],
[151384, `one day you'll be mine`],
[153038, `Wishing on dandelions`],
[154526, `all of the time`],
[155979, `All of the time`],
[159832, `Dandelion,`],
[160821, `into the wind you go`],
[162930, `Won't you let`],
[164150, `my darling know?`],
[166029, `Dandelion,`],
[167097, `into the wind you go`],
[169038, `Won't you let`],
[169975, `my darling know?`],
[171799, `That`],
[173318, `I'm in a field of dandelions`],
[176822, `Wishing on every one that`],
[179183, `you'd be mine,`],
[182976, `mine`],
[185325, `And I see forever`],
[187536, `in your eyes`],
[189051, `I feel okay when I`],
[191232, `see you smile,`],
[195272, `smile`],
[197665, `Wishing on dandelions`],
[199124, `all of the time`],
[200537, `Praying to God that`],
[201871, `one day you'll be mine`],
[203741, `Wishing on dandelions`],
[205284, `all of the time,`],
[206818, `all of the time`],
[210608, `I'm in a field of dandelions`],
[213827, `Wishing on every one that`],
[216146, `you'd be mine,`],
[219909, `mine`],
            ], index: 0},
        ];
        this.playing = false;
        this.currentSong = null;
        this.lastSendTime = -1
    }
    convertCurrenttime(seconds) {
        return Math.ceil(seconds*1000);
    }
    playSong(id) {
        if (this.playing) {
            if (this.currentSong == id) {
                return;
            } else {
                this.pauseSong();
            }
        }
        this.currentSong = id;
        let song = this.songs[id];
        song.audio.play();
        this.playing = true;
        song.audio.ontimeupdate = () => {
            let array = song.lyrics[song.index];
            if (array) {
                let time = array[0];
                let part = array[1];
                if (this.convertCurrenttime(song.audio.currentTime) >= (time - 200) && song.audio.currentTime - this.lastSendTime > 0.569) {
                    this.sendChat(part);
                    song.index++;
                    this.lastSendTime = song.audio.currentTime;
                }
            }
        }
        song.audio.onended = () => {
            this.playing = false;
            song.index = 0;
            this.lastSendTime = -1;
        }
    }
    pauseSong() {
        this.playing = false;
        this.songs[this.currentSong].audio.pause();
        this.lastSendTime = -1;
    }
    resetSong(id) {
        this.songs[id].index = 0;
        this.songs[id].audio.currentTime = 0;
        this.lastSendTime = -1;
    }
    resetAll() {
        this.songs.forEach((e) => {
            e.index = 0;
            e.audio.currentTime = 0;
        });
        this.lastSendTime = -1;
    }
}
